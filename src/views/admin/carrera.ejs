<%- include('global/header') %>

<div class="container" style="max-width: 360px;">
  <form id="miFormulario" class="bg-light p-4 rounded">
    <div id="inputsDinamicos" class="form-group">
      <label for="campo1">Campo 1:</label>
      <input
        type="text"
        class="form-control"
        id="campo1"
        name="campo1"
        required
      />
    </div>
    <div class="form-group">
      <button
        type="button"
        id="agregarCampo"
        class="btn btn-secondary btn-block"
      >
        Agregar campo
      </button>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary btn-block">
        Enviar
      </button>
    </div>
  </form>
</div>

<script>
  let contador = 1;

  document
    .getElementById("agregarCampo")
    .addEventListener("click", function () {
      contador++;
      const div = document.createElement("div");
      div.className = "form-group";
      div.innerHTML = `
      <label for="campo${contador}">Campo ${contador}:</label>
      <input
        type="text"
        class="form-control"
        id="campo${contador}"
        name="campo${contador}"
        required
      />
    `;
      document.getElementById("inputsDinamicos").appendChild(div);
    });

  document
    .getElementById("miFormulario")
    .addEventListener("submit", function (event) {
      event.preventDefault();
      const data = Array.from(this.elements).reduce((obj, element) => {
        if (element.name) {
          obj[element.name] = element.value;
        }
        return obj;
      }, {});
      console.log(data);
    });
</script>
